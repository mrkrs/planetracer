// Generated by CoffeeScript 1.4.0
(function() {
  var Plane,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  Plane = (function() {

    function Plane(_map) {
      this.update = __bind(this.update, this);

      var _this = this;
      this.data = {};
      this.path = new google.maps.MVCArray;
      this.histo = [];
      this.redisCount = 0;
      this.obj = new google.maps.Polyline({
        strokeColor: '#FFFFFF',
        strokeOpacity: 0.05,
        strokeWeight: 1.05
      });
      google.maps.event.addListener(this.obj, 'click', function() {
        _this.obj.setMap(null);
        return console.log(_this);
      });
      this.obj.setMap(_map);
      this.obj.setPath(new google.maps.MVCArray([this.path]));
      return this;
    }

    Plane.prototype.update = function(_data) {
      this.data.type = _data[0];
      this.data.registre = _data[1];
      this.data.flynumber2 = _data[2];
      this.data.l_lat = this.data.lat != null ? this.data.lat : null;
      this.data.l_lon = this.data.lon != null ? this.data.lon : null;
      this.data.lat = _data[3];
      this.data.lon = _data[4];
      this.data.alt = _data[5];
      this.data.angle = _data[6];
      this.data.speed = _data[7];
      this.data.timestamp = _data[8];
      this.data.unknow = _data[9];
      this.data.flynumber1 = _data[10];
      this.data.course = _data[11];
      this.path.insertAt(this.path.length, new google.maps.LatLng(this.data.lat, this.data.lon));
      this.histo.push([this.data.lat, this.data.lon]);
      this.redisCount += 1;
      return this;
    };

    return Plane;

  })();

  window.Plane = Plane;

}).call(this);
